import requests
import pickle
from model_files.ml_model import ModelPredictionHelperClass

MODEL_FILE_NAME = 'xgboost_model.bin'
window_size = 50
with open('./model_files/' + MODEL_FILE_NAME, 'rb') as f_in:
    model = pickle.load(f_in)
    f_in.close()

url = "http://localhost:9696/predict"
rna_sequence = 'CCCCATACCCCTAGTCATCCTCGGCAGGTCTCAGTCCCGGCTCCATCTGTGCCCTCGCCCCAGCCGCAGCTATGTTGCACACCGAGGGCCACGCTCTTCTTCGGGCGGTGGGTCAGGGTAAGCTACGCTTGGCCCGTTTGCTTCTGGAGGGAGGCGCCTACGTGAATGAGGGTGATGCGCAGGGGGAGACTGCGCTAATGGCAGCCTGTCGGGCCCGCTACGACGACCCCCAGAACAAGGCACGCATGGTACGCTACCTCCTGGAGCAAGGCGCGGACCCCAATATCGCAGACCGATTAGGGCGCACGGCGCTCATGCACGCTTGCGCCGGGGGTGGGGGCGCCGCGGTGGCCTCGCTGCTCCTTGCCCACGGCGCAGACCCCTCAGTCCGAGATCACGCGGGCGCCTCGGCTCTTGTCCACGCCCTGGACCGCGGGGACCGCGAGACCCTTGCCACACTGCTGGACGCCTGCAAGGCCAAGGGTACGGAGGTCATCATCATCACCACCGATACCTCGCCCTCAGGCACCAAGAAGACCCGGCAGTATCTCAATTCTCCACCATCCCCAGGGGTGGAGGACCCTGCTCCCGCCTCTCCTAGCCCGGGGTTCTGCACGTCGCCTTCGGAAATCCAACTGCAGACCGCTGGAGGAGGAGGGCGTGGGATGTTATCCCCTCGCGCCCAGGAAGAAGAGGAGAAGCGGGACGTATTTGAATTCCCTCTTCCTAAGCCCCCCGATGACCCATCCCCTTCCGAGCCGCTCCCCAAACCACCACGCCATCCCCCAAAACCACTCAAAAGGCTCAACTCCGAGCCCTGGGGCCTAGTGGCCCCTCCTCAACCAGTCCCACCCACTGAAGGGAGACCGGGGATCGAGCGCTTGACTGCCGAATTCAATGGCCTGACCCTGACCGGTCGACCCCGTCTTTCCCGACGTCACAGCACCGAAGGCCCTGAGGACCCGCCCCCATGGGCGGAGAAAGTGACTAGCGGGGGTCCT'

print("Model Loaded Successfully.")
cls = ModelPredictionHelperClass()

predictions = cls.predict_rna_modification_status(rna_sequence, model, window_size)

print(predictions)
